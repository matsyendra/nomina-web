function incrementa(e,t){var a=database.ref(e).child(t).child("contador");a.transaction(function(e){return(e||0)+1})}function calcula(){tabla.style.display="block",formulario.style.display="none",incrementa("valores_IRPF","Rondando el "+Math.round(_irpf.value).toString()),incrementa("kms_totales",""!=et_kms.value?rangoKms(et_kms.value):"0"),incrementa("clics_totales","boton_calcular"),new Nomina(et_kms.value,_an_ti.value,_irpf.value)}function recargar(){incrementa("clics_totales","boton_nueva_operacion"),location.reload()}function rangoKms(e){return 6e3>e?"con menos de 6000 kms":9e3>e?"entre 6000 y 9000 kms":1e4>e?"entre 9000 y 10000 kms":11e3>e?"10000 y pico":12e3>e?"11000 y pico":13e3>e?"12000 y pico":14e3>e?"13000 y pico":15e3>e?"14000 y pico":16e3>e?"15000 y pico":17e3>e?"16000 y pico":18e3>e?"17000 y pico":19e3>e?"18000 y pico":e>19e3?"con mÃ¡s de 19000 kms":void 0}function Nomina(e,t,a){""===e&&(e=0),""===t&&(t=0),""===a&&(a=0);var n=""!=_precioKmPactado.value?_precioKmPactado.value:0;_precio_km.innerHTML=n,incrementa("precio_km",n.toString().replace(".",",")),"undefined"!=typeof Storage&&(localStorage.setItem("irpf",a),localStorage.setItem("preciokm",n));var o=4.7,r=1.55,_=.1,i=4.7;kms_re.innerHTML=e,_ta_salarial.innerHTML=tabla_salarial,_sa_ba.innerHTML=sa_ba;var l=e>1e4?1e4*k_me10+(e-1e4)*k_Ma10:e*k_me10,c=.5*l;_ho_ex.innerHTML=c.toFixed(2),_pl_as.innerHTML=pl_as;var d=.1*l;_pl_no.innerHTML=d.toFixed(2);var m=.4*l;_ho_pr.innerHTML=m.toFixed(2),_pl_tr.innerHTML=pl_tr,_pa_be.innerHTML=pa_be;var p=e*n-l;_di_et.innerHTML=p.toFixed(2);var s=c+d+m+p+sa_ba+pl_tr+pa_be+pl_as;_to_dev.innerHTML=s.toFixed(2);var u=(pl_tr+sa_ba+c+pl_as+pa_be+156.13)*o/100,y=(pl_tr+sa_ba+c+pl_as+pa_be+156.13+c)*r/100,b=(pl_tr+sa_ba+c+pl_as+pa_be+156.13+c)*_/100,g=c*i/100;ir_pf=(s-p)*a/100,to_ap=u+y+b+g,_to_aportaciones.innerHTML=to_ap.toFixed(2);var f="IRPF (".concat(a,"%)");_irpf_p.innerHTML=f,_irpf_r.innerHTML=ir_pf.toFixed(2);var I=parseFloat(t);_anticipos.innerHTML=I;var v=to_ap+ir_pf+I;_to_deducir.innerHTML=parseFloat(v).toFixed(2),to_a_percibir=s-v,_li_percibir.innerHTML=parseFloat(to_a_percibir).toFixed(2);var B=to_a_percibir+I;_to_retribuido.innerHTML=parseFloat(B).toFixed(2)}var config={apiKey:"AIzaSyDyvTK1lG1dxtidqrBZAz5fO4zGQC3YafU",authDomain:"nomina-6e781.firebaseapp.com",databaseURL:"https://nomina-6e781.firebaseio.com",projectId:"nomina-6e781",storageBucket:"nomina-6e781.appspot.com",messagingSenderId:"984370076661"},r=firebase.initializeApp(config),database=firebase.database();const formulario=document.getElementById("formulario"),tabla=document.getElementById("tabla"),et_kms=document.getElementById("et_kms"),_an_ti=document.getElementById("an_ti"),_irpf=document.getElementById("irpf"),_precioKmPactado=document.getElementById("precioKmPactado_ht"),btn=document.getElementById("btn");"undefined"!=typeof Storage&&(_precioKmPactado.value=localStorage.getItem("preciokm"),_irpf.value=localStorage.getItem("irpf"));const kms_re=document.getElementById("kms_re"),_precio_km=document.getElementById("precio_km"),_ta_salarial=document.getElementById("ta_salarial"),_sa_ba=document.getElementById("sa_ba"),_ho_ex=document.getElementById("ho_ex"),_pl_as=document.getElementById("pl_as"),_pl_no=document.getElementById("pl_no"),_ho_pr=document.getElementById("ho_pr"),_pl_tr=document.getElementById("pl_tr"),_pa_be=document.getElementById("pa_be"),_di_et=document.getElementById("di_et"),_to_dev=document.getElementById("to_dev"),_to_aportaciones=document.getElementById("to_aportaciones"),_irpf_p=document.getElementById("irpf_p"),_irpf_r=document.getElementById("irpf_r"),_anticipos=document.getElementById("anticipos"),_to_deducir=document.getElementById("to_deducir"),_li_percibir=document.getElementById("li_percibir"),_to_retribuido=document.getElementById("to_retribuido"),tabla_salarial=2017,sa_ba=936.78,pl_as=169.62,pa_be=78.06,pl_tr=95.86,k_me10=.0181,k_Ma10=.0323;