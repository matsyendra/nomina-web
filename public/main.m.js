function incrementa(e,t){var a=database.ref(e).child(t).child("contador");a.transaction(function(e){return(e||0)+1})}function calcula(){tabla.style.display="block",formulario.style.display="none",incrementa("valores_IRPF","Rondando el "+Math.round(_irpf.value).toString()),incrementa("kms_totales",""!=et_kms.value?rangoKms(et_kms.value):"0"),incrementa("clics_totales","boton_calcular"),new Nomina(et_kms.value,_an_ti.value,_irpf.value)}function recargar(){incrementa("clics_totales","boton_nueva_operacion"),location.reload()}function rangoKms(e){return 6e3>e?"con menos de 6000 kms":9e3>e?"entre 6000 y 9000 kms":1e4>e?"entre 9000 y 10000 kms":11e3>e?"10000 y pico":12e3>e?"11000 y pico":13e3>e?"12000 y pico":14e3>e?"13000 y pico":15e3>e?"14000 y pico":16e3>e?"15000 y pico":17e3>e?"16000 y pico":18e3>e?"17000 y pico":19e3>e?"18000 y pico":e>19e3?"con más de 19000 kms":void 0}function Nomina(e,t,a){""===e&&(e=0),""===t&&(t=0),""===a&&(a=0);var o=""!=_precioKmPactado.value?_precioKmPactado.value:0;_precio_km.innerHTML=o,incrementa("precio_km",o.toString().replace(".",",")),"undefined"!=typeof Storage&&(localStorage.setItem("irpf",a),localStorage.setItem("preciokm",o));var n=4.7,i=1.55,_=.1,r=4.7;kms_re.innerHTML=e,_ta_salarial.innerHTML=tabla_salarial,_sa_ba.innerHTML=sa_ba;var d=e>1e4?1e4*k_me10+(e-1e4)*k_Ma10:e*k_me10,c=e>1e4?263+(e-1e4)*k_Ma10d:e*k_me10d,l=.5*d;_ho_ex.innerHTML=l.toFixed(2),_pl_as.innerHTML=pl_as;var m=.1*d;_pl_no.innerHTML=m.toFixed(2);var p=.4*d;_ho_pr.innerHTML=p.toFixed(2),_pl_tr.innerHTML=pl_tr,_pa_be.innerHTML=pa_be;var s=e*o-d;_di_et.innerHTML=s.toFixed(2);var u=s-c,g=u/dieta_diaria,y=g.toFixed(2).toString()+" días completos";_dias_convenio.innerHTML=y;var b=l+m+p+s+sa_ba+pl_tr+pa_be+pl_as;_to_dev.innerHTML=b.toFixed(2);var f=(pl_tr+sa_ba+l+pl_as+pa_be+156.13)*n/100,v=(pl_tr+sa_ba+l+pl_as+pa_be+156.13+l)*i/100,I=(pl_tr+sa_ba+l+pl_as+pa_be+156.13+l)*_/100,k=l*r/100;ir_pf=(b-s)*a/100,to_ap=f+v+I+k,_to_aportaciones.innerHTML=to_ap.toFixed(2);var B="IRPF (".concat(a,"%)");_irpf_p.innerHTML=B,_irpf_r.innerHTML=ir_pf.toFixed(2);var E=parseFloat(t);_anticipos.innerHTML=E;var M=to_ap+ir_pf+E;_to_deducir.innerHTML=parseFloat(M).toFixed(2),to_a_percibir=b-M,_li_percibir.innerHTML=parseFloat(to_a_percibir).toFixed(2);var L=to_a_percibir+E;_to_retribuido.innerHTML=parseFloat(L).toFixed(2)}var config={apiKey:"AIzaSyDyvTK1lG1dxtidqrBZAz5fO4zGQC3YafU",authDomain:"nomina-6e781.firebaseapp.com",databaseURL:"https://nomina-6e781.firebaseio.com",projectId:"nomina-6e781",storageBucket:"nomina-6e781.appspot.com",messagingSenderId:"984370076661"},r=firebase.initializeApp(config),database=firebase.database();const formulario=document.getElementById("formulario"),tabla=document.getElementById("tabla"),et_kms=document.getElementById("et_kms"),_an_ti=document.getElementById("an_ti"),_irpf=document.getElementById("irpf"),_precioKmPactado=document.getElementById("precioKmPactado_ht"),btn=document.getElementById("btn");if("undefined"!=typeof Storage){var guardado=localStorage.getItem("preciokm");null===guardado?_precioKmPactado.value=.118:_precioKmPactado.value=guardado,_irpf.value=localStorage.getItem("irpf")}const kms_re=document.getElementById("kms_re"),_precio_km=document.getElementById("precio_km"),_ta_salarial=document.getElementById("ta_salarial"),_sa_ba=document.getElementById("sa_ba"),_ho_ex=document.getElementById("ho_ex"),_pl_as=document.getElementById("pl_as"),_pl_no=document.getElementById("pl_no"),_ho_pr=document.getElementById("ho_pr"),_pl_tr=document.getElementById("pl_tr"),_pa_be=document.getElementById("pa_be"),_di_et=document.getElementById("di_et"),_to_dev=document.getElementById("to_dev"),_to_aportaciones=document.getElementById("to_aportaciones"),_irpf_p=document.getElementById("irpf_p"),_irpf_r=document.getElementById("irpf_r"),_anticipos=document.getElementById("anticipos"),_to_deducir=document.getElementById("to_deducir"),_li_percibir=document.getElementById("li_percibir"),_to_retribuido=document.getElementById("to_retribuido"),_dias_convenio=document.getElementById("dias_convenio"),tabla_salarial=2017,sa_ba=936.78,pl_as=169.62,pa_be=78.06,pl_tr=95.86,k_me10=.0181,k_Ma10=.0323,k_me10d=.0263,k_Ma10d=.0474,dieta_diaria=30;